<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Mirra Sense | Unlock Your Skin's Secret</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Playfair+Display:ital,wght@0,400;0,700;1,400&family=Plus+Jakarta+Sans:wght@300;400;500;600&display=swap" rel="stylesheet">
    <script src="https://unpkg.com/lucide@latest"></script>
    <style>
        :root {
            --maroon-dark: #3a0615;
            --maroon-mid: #5e0a22;
            --maroon-main: #880E31;
            --accent: #FF8A9B;
            --glass: rgba(255, 255, 255, 0.08);
        }

        body {
            font-family: 'Plus Jakarta Sans', sans-serif;
            background: 
                radial-gradient(circle at 10% 20%, rgba(136, 14, 49, 0.3) 0%, transparent 40%),
                radial-gradient(circle at 90% 80%, rgba(255, 138, 155, 0.1) 0%, transparent 40%),
                linear-gradient(135deg, var(--maroon-dark) 0%, var(--maroon-mid) 50%, var(--maroon-dark) 100%);
            background-attachment: fixed;
            color: white;
            overflow-x: hidden;
            scroll-behavior: smooth;
            margin: 0;
        }

        /* AI Particle Canvas Background */
        #ai-canvas {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: -1;
            pointer-events: none;
            opacity: 0.4;
        }

        h1, h2, h3, .serif { font-family: 'Playfair Display', serif; }

        /* Animation States */
        .reveal {
            opacity: 0;
            transform: translateY(30px) scale(0.95);
            transition: all 0.8s cubic-bezier(0.25, 1, 0.5, 1);
        }

        .reveal.active {
            opacity: 1;
            transform: translateY(0) scale(1);
        }

        .pop-in {
            opacity: 0;
            transform: scale(0.7);
            transition: all 0.6s cubic-bezier(0.34, 1.56, 0.64, 1);
        }

        .pop-in.active {
            opacity: 1;
            transform: scale(1);
        }

        /* Glassmorphism */
        .glass-card {
            background: var(--glass);
            backdrop-filter: blur(25px);
            -webkit-backdrop-filter: blur(25px);
            border: 1px solid rgba(255, 255, 255, 0.12);
            border-radius: 40px;
            box-shadow: 0 15px 35px rgba(0, 0, 0, 0.2);
            transition: all 0.5s cubic-bezier(0.4, 0, 0.2, 1);
        }

        .glass-card:hover {
            transform: translateY(-10px) scale(1.02);
            background: rgba(255, 255, 255, 0.15);
            border-color: var(--accent);
        }

        .pill-button {
            border-radius: 9999px;
            transition: all 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275);
        }

        .pill-button:hover {
            transform: translateY(-3px) scale(1.05);
            box-shadow: 0 10px 25px rgba(255, 138, 155, 0.5);
        }

        .glow-text {
            text-shadow: 0 0 25px rgba(255, 138, 155, 0.4);
        }

        /* Parallax & Floating Effects */
        .parallax-bg {
            will-change: transform;
            transition: transform 0.1s ease-out;
        }

        @keyframes floating {
            0% { transform: translateY(0px); }
            50% { transform: translateY(-15px); }
            100% { transform: translateY(0px); }
        }

        .float-anim {
            animation: floating 6s ease-in-out infinite;
        }

        /* Scanning FX */
        .scan-overlay {
            background: linear-gradient(rgba(255, 138, 155, 0.2) 2px, transparent 2px),
                        linear-gradient(90deg, rgba(255, 138, 155, 0.2) 2px, transparent 2px);
            background-size: 40px 40px;
            animation: scan-move 4s linear infinite;
        }

        @keyframes scan-move {
            0% { background-position: 0 0; }
            100% { background-position: 40px 40px; }
        }

        .scanning-line {
            width: 100%;
            height: 4px;
            background: var(--accent);
            box-shadow: 0 0 20px var(--accent);
            position: absolute;
            animation: line-move 2.5s ease-in-out infinite;
        }

        @keyframes line-move {
            0%, 100% { top: 0%; }
            50% { top: 100%; }
        }

        .hidden { display: none; }

        .hero-tagline {
            letter-spacing: -0.02em;
            line-height: 0.9;
        }

        .section-glow {
            position: absolute;
            width: 100%;
            height: 100%;
            top: 0;
            left: 0;
            background: radial-gradient(circle at center, rgba(136, 14, 49, 0.4) 0%, transparent 70%);
            pointer-events: none;
            z-index: -1;
        }
    </style>
</head>
<body>

    <!-- Neural Network Background Canvas -->
    <canvas id="ai-canvas"></canvas>

    <!-- Navigation -->
    <nav class="fixed w-full z-50 px-6 py-4">
        <div class="max-w-7xl mx-auto flex justify-between items-center glass-card px-8 py-3 translate-y-[-100%] opacity-0" id="main-nav" style="transition: all 1s ease 0.5s; border-radius: 999px;">
            <div class="text-2xl font-bold tracking-tighter serif">MIRRA <span class="text-[#FF8A9B]">SENSE</span></div>
            <div class="hidden md:flex space-x-8 text-sm uppercase tracking-widest font-medium">
                <a href="#technology" class="hover:text-[#FF8A9B] transition text-white/70">Technology</a>
                <a href="#solution" class="hover:text-[#FF8A9B] transition text-white/70">Solution</a>
                <a href="#benefits" class="hover:text-[#FF8A9B] transition text-white/70">Benefits</a>
            </div>
            <button onclick="openScanner()" class="pill-button bg-[#FF8A9B] text-[#880E31] font-bold px-6 py-2 text-sm">TRY NOW</button>
        </div>
    </nav>

    <!-- Hero Section -->
    <section class="relative min-h-screen flex flex-col justify-center items-center pt-20 px-6 text-center overflow-hidden">
        <div class="section-glow parallax-bg" data-speed="0.2" style="opacity: 0.6;"></div>
        
        <!-- Animated Background Elements -->
        <div class="absolute top-1/4 left-10 w-64 h-64 bg-maroon-main/20 rounded-full blur-[100px] float-anim" style="animation-delay: 0s;"></div>
        <div class="absolute bottom-1/4 right-10 w-96 h-96 bg-accent/10 rounded-full blur-[120px] float-anim" style="animation-delay: -2s;"></div>

        <div class="max-w-5xl z-10">
            <span class="text-[#FF8A9B] font-semibold tracking-[0.4em] uppercase text-xs md:text-sm mb-6 block pop-in active">Unlock Your Skin's Secret</span>
            <h1 class="text-6xl md:text-[120px] mb-8 glow-text hero-tagline reveal active">
                <span class="block">Clarity</span>
                <span class="serif italic font-light">Beyond</span>
                <span class="block text-4xl md:text-8xl tracking-tight mt-2 opacity-90">The Mirror.</span>
            </h1>
            <p class="text-lg md:text-xl text-white/70 max-w-2xl mx-auto mb-10 font-light leading-relaxed reveal active" style="transition-delay: 0.2s;">
                Transformasi kecantikan berbasis AI yang dirancang untuk memahami Anda lebih dalam dari sekadar pantulan cermin. Presisi, objektif, dan sepenuhnya personal.
            </p>
            <div class="flex flex-col sm:flex-row justify-center gap-4 reveal active" style="transition-delay: 0.4s;">
                <button onclick="scrollToScanner()" class="pill-button bg-white text-[#880E31] font-bold px-10 py-4 text-lg">Mulai Analisis</button>
                <button onclick="document.getElementById('technology').scrollIntoView({behavior:'smooth'})" class="pill-button border border-white/30 hover:bg-white/10 px-10 py-4 text-lg">Pelajari Teknologi</button>
            </div>
        </div>
    </section>

    <!-- Core Technology Section -->
    <section id="technology" class="py-32 px-6 relative">
        <div class="section-glow parallax-bg" data-speed="0.1"></div>
        <div class="max-w-7xl mx-auto">
            <div class="text-center mb-16 reveal">
                <span class="text-[#FF8A9B] font-bold tracking-widest uppercase text-xs mb-2 block">Intelligent Engine</span>
                <h2 class="text-4xl md:text-5xl serif">The Science of Beauty</h2>
            </div>
            
            <div class="grid md:grid-cols-4 gap-6">
                <!-- Tech 1 -->
                <div class="tech-item glass-card p-8 reveal" style="transition-delay: 0.1s;">
                    <i data-lucide="scan-face" class="w-10 h-10 text-[#FF8A9B] mb-6"></i>
                    <h4 class="text-lg font-bold mb-3">Hyper-Spectral Image Analysis</h4>
                    <p class="text-white/50 text-xs leading-relaxed">Pemindaian hingga lapisan dermis untuk mendeteksi masalah kulit yang belum terlihat oleh mata telanjang.</p>
                </div>
                <!-- Tech 2 -->
                <div class="tech-item glass-card p-8 reveal" style="transition-delay: 0.2s;">
                    <i data-lucide="cpu" class="w-10 h-10 text-[#FF8A9B] mb-6"></i>
                    <h4 class="text-lg font-bold mb-3">Neural Processing Engine</h4>
                    <p class="text-white/50 text-xs leading-relaxed">Algoritma AI yang terus belajar dari jutaan data dermatologi untuk akurasi diagnosis yang terus meningkat.</p>
                </div>
                <!-- Tech 3 -->
                <div class="tech-item glass-card p-8 reveal" style="transition-delay: 0.3s;">
                    <i data-lucide="database" class="w-10 h-10 text-[#FF8A9B] mb-6"></i>
                    <h4 class="text-lg font-bold mb-3">Big Data Skin Matrix</h4>
                    <p class="text-white/50 text-xs leading-relaxed">Sinkronisasi data real-time untuk membandingkan kondisi kulit Anda dengan standar kesehatan kulit global.</p>
                </div>
                <!-- Tech 4 -->
                <div class="tech-item glass-card p-8 reveal" style="transition-delay: 0.4s;">
                    <i data-lucide="shield-check" class="w-10 h-10 text-[#FF8A9B] mb-6"></i>
                    <h4 class="text-lg font-bold mb-3">Predictive Forecasting</h4>
                    <p class="text-white/50 text-xs leading-relaxed">Simulasi AI untuk memprediksi hasil perawatan dan mencegah penuaan dini berdasarkan data genetik kulit.</p>
                </div>
            </div>
        </div>
    </section>

    <!-- Problem & Solution Section -->
    <section id="solution" class="py-32 px-6 relative">
        <div class="section-glow parallax-bg" data-speed="-0.1" style="background: radial-gradient(circle at left, rgba(136, 14, 49, 0.4) 0%, transparent 70%);"></div>
        <div class="max-w-6xl mx-auto grid md:grid-cols-2 gap-16 items-center">
            <div class="glass-card p-8 md:p-12 relative overflow-hidden reveal">
                <div class="absolute -top-10 -right-10 w-40 h-40 bg-[#FF8A9B]/20 blur-3xl rounded-full"></div>
                <h3 class="serif text-3xl mb-6">Metode Konvensional <br><span class="text-white/40 italic">Penuh Ketidakpastian</span></h3>
                <ul class="space-y-4 text-white/60">
                    <li class="flex items-start gap-3 reveal" style="transition-delay: 0.2s;"><i data-lucide="circle-x" class="text-red-400 mt-1"></i> Diagnosis subjektif berdasarkan penglihatan mata saja.</li>
                    <li class="flex items-start gap-3 reveal" style="transition-delay: 0.3s;"><i data-lucide="circle-x" class="text-red-400 mt-1"></i> Trial & error produk kecantikan yang menguras biaya.</li>
                    <li class="flex items-start gap-3 reveal" style="transition-delay: 0.4s;"><i data-lucide="circle-x" class="text-red-400 mt-1"></i> Tidak ada visualisasi progres yang terukur secara data.</li>
                </ul>
            </div>
            <div class="reveal" style="transition-delay: 0.2s;">
                <h2 class="text-4xl serif mb-6">Precision Over<br>Intuition.</h2>
                <p class="text-white/70 mb-8 leading-relaxed">
                    Mirra Sense menghilangkan keraguan dalam perawatan kulit. Melalui sensor AI tingkat lanjut, kami mengekstraksi data kesehatan kulit secara objektif untuk memberikan solusi yang tepat sasaran.
                </p>
                <div class="grid grid-cols-2 gap-4">
                    <div class="glass-card p-6 bg-white/5 border-none pop-in">
                        <div class="text-[#FF8A9B] mb-2 font-bold text-2xl">98%</div>
                        <div class="text-xs uppercase tracking-widest text-white/50">Akurasi Scan</div>
                    </div>
                    <div class="glass-card p-6 bg-white/5 border-none pop-in" style="transition-delay: 0.1s;">
                        <div class="text-[#FF8A9B] mb-2 font-bold text-2xl">Real-time</div>
                        <div class="text-xs uppercase tracking-widest text-white/50">Tracking Progres</div>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Key Benefits -->
    <section id="benefits" class="py-32 px-6 relative">
        <div class="section-glow parallax-bg" data-speed="0.15" style="background: radial-gradient(circle at right, rgba(136, 14, 49, 0.4) 0%, transparent 70%);"></div>
        <div class="max-w-7xl mx-auto text-center mb-16 reveal">
            <h2 class="text-4xl serif">The Mirra Experience</h2>
        </div>
        <div class="max-w-7xl mx-auto grid md:grid-cols-3 gap-8">
            <div class="glass-card p-10 hover:bg-white/10 transition cursor-default group reveal" style="transition-delay: 0.1s;">
                <i data-lucide="fingerprint" class="w-12 h-12 text-[#FF8A9B] mb-6 group-hover:scale-110 transition"></i>
                <h4 class="text-xl font-bold mb-4">Hyper-Personalization</h4>
                <p class="text-white/60 text-sm leading-relaxed">Rekomendasi bahan aktif dan produk yang disesuaikan secara unik dengan profil biologi kulit Anda.</p>
            </div>
            <div class="glass-card p-10 hover:bg-white/10 transition cursor-default group reveal" style="transition-delay: 0.2s;">
                <i data-lucide="line-chart" class="w-12 h-12 text-[#FF8A9B] mb-6 group-hover:scale-110 transition"></i>
                <h4 class="text-xl font-bold mb-4">Live Progress Tracking</h4>
                <p class="text-white/60 text-sm leading-relaxed">Lihat bagaimana kulit Anda berevolusi dari hari ke hari dengan laporan diagnostik mendalam.</p>
            </div>
            <div class="glass-card p-10 hover:bg-white/10 transition cursor-default group reveal" style="transition-delay: 0.3s;">
                <i data-lucide="brain-circuit" class="w-12 h-12 text-[#FF8A9B] mb-6 group-hover:scale-110 transition"></i>
                <h4 class="text-xl font-bold mb-4">AI Ingredient Guide</h4>
                <p class="text-white/60 text-sm leading-relaxed">Edukasi cerdas mengenai bahan aktif yang paling dibutuhkan kulit Anda saat ini berdasarkan analisis real-time.</p>
            </div>
        </div>
    </section>

    <!-- Interactive Simulation Widget -->
    <section id="scan-section" class="py-32 px-6 relative overflow-hidden">
        <div class="section-glow parallax-bg" data-speed="0.05" style="background: radial-gradient(circle at center, rgba(255, 138, 155, 0.1) 0%, transparent 80%);"></div>
        <div class="max-w-4xl mx-auto glass-card p-2 md:p-4 reveal">
            <div id="sim-container" class="bg-black/30 rounded-[35px] overflow-hidden min-h-[500px] flex flex-col items-center justify-center text-center p-8 relative">
                
                <!-- Step 1: Trigger -->
                <div id="step-trigger" class="fade-in">
                    <div class="w-24 h-24 bg-[#FF8A9B]/20 rounded-full flex items-center justify-center mx-auto mb-8 pop-in active">
                        <i data-lucide="camera" class="text-[#FF8A9B] w-10 h-10"></i>
                    </div>
                    <h2 class="text-3xl serif mb-4">Ready to see the truth?</h2>
                    <p class="text-white/60 mb-8 max-w-sm mx-auto">Mulai simulasi pemindaian kulit Anda dengan teknologi Mirra Sense AI sekarang.</p>
                    <button onclick="goToStep('step-consent')" class="pill-button bg-[#FF8A9B] text-[#880E31] font-bold px-12 py-4">SCAN KULITMU</button>
                </div>

                <!-- Step 2: Consent -->
                <div id="step-consent" class="hidden fade-in max-w-md">
                    <h3 class="text-2xl serif mb-6">Persetujuan Privasi</h3>
                    <p class="text-white/60 text-sm mb-8">
                        Kami menghargai privasi Anda. Mirra Sense memerlukan akses kamera untuk menganalisis kondisi kulit secara real-time. Data Anda akan dienkripsi secara aman sesuai dengan standar keamanan medis.
                    </p>
                    <div class="flex gap-4 justify-center">
                        <button onclick="goToStep('step-trigger')" class="text-white/40 hover:text-white px-6">Batal</button>
                        <button onclick="startCamera()" class="pill-button bg-white text-[#880E31] font-bold px-8 py-3">Saya Setuju</button>
                    </div>
                </div>

                <!-- Step 3: Camera Interface -->
                <div id="step-camera" class="hidden absolute inset-0 w-full h-full bg-black">
                    <div class="scan-overlay absolute inset-0 opacity-40"></div>
                    <div class="scanning-line"></div>
                    <div class="absolute inset-0 flex items-center justify-center overflow-hidden">
                        <div class="w-64 h-64 border-2 border-[#FF8A9B] rounded-full flex items-center justify-center opacity-50 scale-animation" style="animation: pulse 2s infinite">
                            <div class="w-full h-[1px] bg-[#FF8A9B] rotate-45 absolute"></div>
                            <div class="w-full h-[1px] bg-[#FF8A9B] -rotate-45 absolute"></div>
                        </div>
                        <p class="absolute bottom-24 text-[#FF8A9B] text-xs tracking-widest font-bold uppercase">Position your face within the circle</p>
                    </div>
                    <button onclick="captureImage()" class="absolute bottom-8 left-1/2 -translate-x-1/2 w-20 h-20 border-4 border-white rounded-full p-1 group">
                        <div class="w-full h-full bg-white rounded-full group-active:scale-90 transition"></div>
                    </button>
                </div>

                <!-- Step 4: Lead Magnet Form -->
                <div id="step-lead" class="hidden fade-in max-w-md">
                    <div class="mb-6">
                        <i data-lucide="lock" class="text-[#FF8A9B] w-12 h-12 mx-auto mb-4 pop-in active"></i>
                        <h3 class="text-2xl serif mb-2">Analisis Selesai!</h3>
                        <p class="text-white/60 text-sm">Masukkan detail di bawah untuk mengunci data kesehatan kulit Anda dan melihat hasilnya.</p>
                    </div>
                    <form onsubmit="showResults(event)" class="space-y-4 text-left">
                        <div class="reveal active">
                            <label class="text-[10px] uppercase tracking-widest text-white/40 ml-4 mb-1 block">Full Name</label>
                            <input required type="text" placeholder="Nama Lengkap" class="w-full bg-white/10 border border-white/10 rounded-full px-6 py-3 focus:outline-none focus:border-[#FF8A9B] transition">
                        </div>
                        <div class="reveal active" style="transition-delay: 0.1s;">
                            <label class="text-[10px] uppercase tracking-widest text-white/40 ml-4 mb-1 block">WhatsApp / Email</label>
                            <input required type="text" placeholder="email@anda.com" class="w-full bg-white/10 border border-white/10 rounded-full px-6 py-3 focus:outline-none focus:border-[#FF8A9B] transition">
                        </div>
                        <button type="submit" class="w-full pill-button bg-[#FF8A9B] text-[#880E31] font-bold py-4 mt-4 uppercase tracking-widest">Lihat Skor Kulit Saya</button>
                    </form>
                </div>

                <!-- Step 5: Result Page -->
                <div id="step-result" class="hidden fade-in w-full text-left">
                    <div class="flex justify-between items-end mb-8 reveal active">
                        <div>
                            <h3 class="text-3xl serif">Skin Health Analysis</h3>
                            <p class="text-white/50 text-sm">ID: MS-2025-8890</p>
                        </div>
                        <div class="text-right pop-in active">
                            <span class="text-4xl font-bold text-[#FF8A9B]">87<span class="text-sm opacity-50">/100</span></span>
                            <p class="text-[10px] uppercase tracking-widest opacity-40">Health Score</p>
                        </div>
                    </div>

                    <div class="grid grid-cols-2 gap-4 mb-8">
                        <div class="bg-[#EBF5FF]/10 border border-[#EBF5FF]/20 rounded-3xl p-6 text-[#EBF5FF] reveal active" style="transition-delay: 0.2s;">
                            <p class="text-xs uppercase font-bold opacity-60 mb-2">Skin Category</p>
                            <p class="text-xl font-medium">Combination / Dry</p>
                        </div>
                        <div class="bg-white/5 rounded-3xl p-6 reveal active" style="transition-delay: 0.3s;">
                            <p class="text-xs uppercase font-bold opacity-40 mb-2">Main Issue</p>
                            <p class="text-xl font-medium text-[#FF8A9B]">Hydration Loss</p>
                        </div>
                    </div>

                    <div class="glass-card p-6 border-white/10 mb-8 reveal active" style="transition-delay: 0.4s;">
                        <h4 class="text-sm font-bold uppercase tracking-widest mb-4">Recommended Ingredients</h4>
                        <div class="flex flex-wrap gap-2">
                            <span class="bg-white/10 px-4 py-2 rounded-full text-xs border border-white/5 pop-in active">Hyaluronic Acid</span>
                            <span class="bg-white/10 px-4 py-2 rounded-full text-xs border border-white/5 pop-in active" style="transition-delay: 0.1s;">Ceramides</span>
                            <span class="bg-white/10 px-4 py-2 rounded-full text-xs border border-white/5 pop-in active" style="transition-delay: 0.2s;">Squalane</span>
                        </div>
                    </div>

                    <button onclick="resetSim()" class="w-full text-center text-white/40 text-sm hover:text-white transition uppercase tracking-widest">Restart Analysis</button>
                </div>

            </div>
        </div>
    </section>

    <!-- Footer -->
    <footer class="py-20 px-6 relative border-t border-white/10 text-center">
        <div class="section-glow" style="background: linear-gradient(to top, rgba(136, 14, 49, 0.4), transparent);"></div>
        <p class="text-2xl font-bold tracking-tighter serif mb-4 reveal">MIRRA <span class="text-[#FF8A9B]">SENSE</span></p>
        <p class="text-white/40 text-xs max-w-xs mx-auto mb-8 reveal">Part of Alenkosa Tech Intelligence. Shaping the future of dermatological precision.</p>
        <div class="flex justify-center space-x-6 text-white/40 mb-8 reveal">
            <a href="#" class="hover:text-white transition">Instagram</a>
            <a href="#" class="hover:text-white transition">LinkedIn</a>
            <a href="#" class="hover:text-white transition">Twitter</a>
        </div>
        <div class="text-[10px] uppercase tracking-[0.2em] text-white/20">Â© 2025 Alenkosa. All Rights Reserved.</div>
    </footer>

    <script>
        // --- AI Particle System Background ---
        const canvas = document.getElementById('ai-canvas');
        const ctx = canvas.getContext('2d');
        let particles = [];
        const particleCount = 80;

        function initCanvas() {
            canvas.width = window.innerWidth;
            canvas.height = window.innerHeight;
            particles = [];
            for (let i = 0; i < particleCount; i++) {
                particles.push({
                    x: Math.random() * canvas.width,
                    y: Math.random() * canvas.height,
                    vx: (Math.random() - 0.5) * 0.5,
                    vy: (Math.random() - 0.5) * 0.5,
                    size: Math.random() * 2 + 1
                });
            }
        }

        function drawParticles() {
            ctx.clearRect(0, 0, canvas.width, canvas.height);
            ctx.fillStyle = 'rgba(255, 138, 155, 0.5)';
            ctx.strokeStyle = 'rgba(255, 138, 155, 0.15)';
            ctx.lineWidth = 0.5;

            for (let i = 0; i < particles.length; i++) {
                let p = particles[i];
                p.x += p.vx;
                p.y += p.vy;

                if (p.x < 0 || p.x > canvas.width) p.vx *= -1;
                if (p.y < 0 || p.y > canvas.height) p.vy *= -1;

                ctx.beginPath();
                ctx.arc(p.x, p.y, p.size, 0, Math.PI * 2);
                ctx.fill();

                for (let j = i + 1; j < particles.length; j++) {
                    let p2 = particles[j];
                    let dx = p.x - p2.x;
                    let dy = p.y - p2.y;
                    let dist = Math.sqrt(dx * dx + dy * dy);

                    if (dist < 150) {
                        ctx.beginPath();
                        ctx.moveTo(p.x, p.y);
                        ctx.lineTo(p2.x, p2.y);
                        ctx.stroke();
                    }
                }
            }
            requestAnimationFrame(drawParticles);
        }

        window.addEventListener('resize', initCanvas);
        initCanvas();
        drawParticles();

        // --- Navigation and UI Animations ---
        lucide.createIcons();

        const observerOptions = { threshold: 0.1 };
        const observer = new IntersectionObserver((entries) => {
            entries.forEach(entry => {
                if (entry.isIntersecting) {
                    entry.target.classList.add('active');
                }
            });
        }, observerOptions);

        document.querySelectorAll('.reveal, .pop-in').forEach(el => observer.observe(el));

        window.addEventListener('scroll', () => {
            const parallaxElements = document.querySelectorAll('.parallax-bg');
            let scrollPos = window.pageYOffset;
            
            parallaxElements.forEach(el => {
                const speed = el.getAttribute('data-speed') || 0.1;
                el.style.transform = `translateY(${scrollPos * speed}px)`;
            });

            const nav = document.getElementById('main-nav');
            if (scrollPos > 100) {
                nav.style.background = 'rgba(58, 6, 21, 0.8)';
            } else {
                nav.style.background = 'var(--glass)';
            }
        });

        window.onload = () => {
            document.getElementById('main-nav').style.opacity = '1';
            document.getElementById('main-nav').style.transform = 'translateY(0)';
        };

        // --- Simulation Functions ---
        function goToStep(stepId) {
            document.querySelectorAll('#sim-container > div').forEach(div => {
                div.classList.add('hidden');
            });
            document.getElementById(stepId).classList.remove('hidden');
            document.getElementById(stepId).classList.add('fade-in');
            lucide.createIcons();
        }

        function startCamera() {
            goToStep('step-camera');
        }

        function captureImage() {
            const container = document.getElementById('sim-container');
            container.style.backgroundColor = 'white';
            setTimeout(() => {
                container.style.backgroundColor = 'rgba(0,0,0,0.3)';
                goToStep('step-lead');
            }, 100);
        }

        function showResults(e) {
            e.preventDefault();
            const btn = e.target.querySelector('button');
            btn.innerHTML = "Analyzing Skin Data...";
            btn.disabled = true;
            
            setTimeout(() => {
                goToStep('step-result');
                lucide.createIcons();
            }, 2000);
        }

        function resetSim() {
            goToStep('step-trigger');
        }

        function scrollToScanner() {
            document.getElementById('scan-section').scrollIntoView({ behavior: 'smooth' });
        }

        function openScanner() {
            scrollToScanner();
            setTimeout(resetSim, 500);
        }
    </script>
</body>
</html>